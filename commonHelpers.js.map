{"version":3,"file":"commonHelpers.js","sources":["../src/script.js"],"sourcesContent":["const elements = {\n  form: document.querySelector('.search-form'),\n  list: document.querySelector('.gallery'),\n  btnLoadMore: document.querySelector('.js-load-more'),\n};\n\nelements.form.addEventListener('submit', handlerGetPhoto);\nelements.btnLoadMore.addEventListener('click', handlerGetMorePhoto);\n\nlet page = 1;\n\nasync function handlerGetMorePhoto(evt) {\n  page += 1;\n  const search = elements.form.elements.searchQuery.value;\n  const resp = await serviceImage(search, page);\n  if (page === 12) {\n    alert(\"We're sorry, but you've reached the end of search results.\");\n    elements.btnLoadMore.classList.replace('load-more', 'load-more-hidden');\n  } else {\n    elements.list.insertAdjacentHTML('beforeend', createMarckup(resp.hits));\n  }\n}\n\nasync function handlerGetPhoto(evt) {\n  evt.preventDefault();\n  const value = evt.currentTarget.elements.searchQuery.value;\n  page = 1;\n  elements.list.innerHTML = '';\n  elements.btnLoadMore.classList.replace('load-more', 'load-more-hidden');\n  try {\n    const result = await serviceImage(value);\n    if (result.hits.length === 0) {\n      return alert(\n        '\"Sorry, there are no images matching your search query. Please try again.\"'\n      );\n    }\n    elements.list.insertAdjacentHTML('beforeend', createMarckup(result.hits));\n    elements.btnLoadMore.classList.replace('load-more-hidden', 'load-more');\n  } catch (error) {\n    console.log(error);\n  }\n}\n\nasync function serviceImage(value, page = 1) {\n  const MAIN_URL = 'https://pixabay.com/api/';\n  const params = new URLSearchParams({\n    key: '40911522-ba38adab2f7d889473ea5ba96',\n    q: value,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n    per_page: 40,\n    page,\n  });\n  const resp = await fetch(`${MAIN_URL}?${params}`);\n  if (!resp.ok) {\n    throw new Error(resp.statusText);\n  }\n  return await resp.json();\n}\n\nfunction createMarckup(arr) {\n  return arr\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) => `\n      <div class=\"photo-card\">\n    <img class=\"img-gallery\" src=\"${webformatURL}\" alt=\"${tags}\" loading=\"lazy\" />\n    <div class=\"info\">\n        <p class=\"info-item\">\n            <b>Likes: ${likes}</b>\n        </p>\n            <p class=\"info-item\">\n        <b>Views: ${views}</b>\n        </p>\n        <p class=\"info-item\">\n            <b>Comments: ${comments}</b>\n        </p>\n        <p class=\"info-item\">\n            <b>Downloads: ${downloads}</b>\n        </p>\n    </div>\n</div>`\n    )\n    .join('');\n}\n"],"names":["elements","handlerGetPhoto","handlerGetMorePhoto","page","evt","search","resp","serviceImage","createMarckup","value","result","error","MAIN_URL","params","arr","webformatURL","largeImageURL","tags","likes","views","comments","downloads"],"mappings":"ssBAAA,MAAMA,EAAW,CACf,KAAM,SAAS,cAAc,cAAc,EAC3C,KAAM,SAAS,cAAc,UAAU,EACvC,YAAa,SAAS,cAAc,eAAe,CACrD,EAEAA,EAAS,KAAK,iBAAiB,SAAUC,CAAe,EACxDD,EAAS,YAAY,iBAAiB,QAASE,CAAmB,EAElE,IAAIC,EAAO,EAEX,eAAeD,EAAoBE,EAAK,CACtCD,GAAQ,EACR,MAAME,EAASL,EAAS,KAAK,SAAS,YAAY,MAC5CM,EAAO,MAAMC,EAAaF,EAAQF,CAAI,EACxCA,IAAS,IACX,MAAM,4DAA4D,EAClEH,EAAS,YAAY,UAAU,QAAQ,YAAa,kBAAkB,GAEtEA,EAAS,KAAK,mBAAmB,YAAaQ,EAAcF,EAAK,IAAI,CAAC,CAE1E,CAEA,eAAeL,EAAgBG,EAAK,CAClCA,EAAI,eAAc,EAClB,MAAMK,EAAQL,EAAI,cAAc,SAAS,YAAY,MACrDD,EAAO,EACPH,EAAS,KAAK,UAAY,GAC1BA,EAAS,YAAY,UAAU,QAAQ,YAAa,kBAAkB,EACtE,GAAI,CACF,MAAMU,EAAS,MAAMH,EAAaE,CAAK,EACvC,GAAIC,EAAO,KAAK,SAAW,EACzB,OAAO,MACL,4EACR,EAEIV,EAAS,KAAK,mBAAmB,YAAaQ,EAAcE,EAAO,IAAI,CAAC,EACxEV,EAAS,YAAY,UAAU,QAAQ,mBAAoB,WAAW,CACvE,OAAQW,EAAP,CACA,QAAQ,IAAIA,CAAK,CAClB,CACH,CAEA,eAAeJ,EAAaE,EAAON,EAAO,EAAG,CAC3C,MAAMS,EAAW,2BACXC,EAAS,IAAI,gBAAgB,CACjC,IAAK,qCACL,EAAGJ,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,SAAU,GACV,KAAAN,CACJ,CAAG,EACKG,EAAO,MAAM,MAAM,GAAGM,KAAYC,GAAQ,EAChD,GAAI,CAACP,EAAK,GACR,MAAM,IAAI,MAAMA,EAAK,UAAU,EAEjC,OAAO,MAAMA,EAAK,MACpB,CAEA,SAASE,EAAcM,EAAK,CAC1B,OAAOA,EACJ,IACC,CAAC,CACC,aAAAC,EACA,cAAAC,EACA,KAAAC,EACA,MAAAC,EACA,MAAAC,EACA,SAAAC,EACA,UAAAC,CACR,IAAY;AAAA;AAAA,oCAEwBN,WAAsBE;AAAA;AAAA;AAAA,wBAGlCC;AAAA;AAAA;AAAA,oBAGJC;AAAA;AAAA;AAAA,2BAGOC;AAAA;AAAA;AAAA,4BAGCC;AAAA;AAAA;AAAA,OAIvB,EACA,KAAK,EAAE,CACZ"}